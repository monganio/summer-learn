<!DOCTYPE html>
<html>
<head>
    <title>Todo App</title>
</head>
<body>
    <h1>Simple Todo App</h1>
    <p>Welcome, {{ current_user }}!</p>

    <form action="/todos" method="get">
        <button type="submit">Show All Todos</button>
    </form>

    <form action="/create-todo" method="post">
        <input type="text" name="item" placeholder="Enter a new todo" required>
        <button type="submit">Add</button>
    </form>

    <h2>Todo List:</h2>
    <ul>
        {% for todo in todos %}
            <li>
                {{ todo.item }} (by: {{ todo.owner }})
                <button onclick="showDeleteForm('{{ loop.index0 }}')">Delete</button>
                <form id="deleteForm{{ loop.index0 }}" action="/delete-todo" method="post" style="display: none; margin-left: 10px;">
                    <input type="hidden" name="item" value="{{ todo.item }}">
                    <button type="submit">Confirm Delete</button>
                    <button type="button" onclick="hideDeleteForm('{{ loop.index0 }}')">Cancel</button>
                </form>
            </li>
        {% else %}
            <li>No todos yet!</li>
        {% endfor %}
    </ul>
    
    <script>
        function showDeleteForm(index) {
            document.getElementById('deleteForm' + index).style.display = 'inline';
        }
        function hideDeleteForm(index) {
            document.getElementById('deleteForm' + index).style.display = 'none';
        }
    </script>
</body>
</html>